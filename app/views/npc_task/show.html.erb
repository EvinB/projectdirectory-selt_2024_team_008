<%= stylesheet_link_tag 'npc_task', media: 'all', 'data-turbolinks-track': 'reload' %>

<script>
    const gameId = <%= @game.id %>;
</script>
<div class="top-navigation">
  <%= button_to "Return", game_path(@game), class: "btn return-btn", method: :get %>
  <div class="shard-balance-display">
    <p>Shard Balance: <%= current_user.shard_account.balance %> Shards</p>
  </div>
  <%= button_to "Temp", buy_shards_shard_accounts_path, class: "btn add-funds-btn", method: :get %>
</div>

<div class="npc-task-container">
  <div class="npc-photo">
    <img src="<%= asset_path('npc1.png') %>" alt="NPC Photo">
  </div>

  <div class="npc-chat-container">
    <div class="chat-history" id="chat-history">
      <p><strong>NPC:</strong> Welcome, adventurer! Press "Start" to receive a question.</p>
    </div>

    <button id="start-interaction" class="btn return-btn">Start Interaction</button>

    <form class="npc-response-form hidden" id="npc-response-form" action="<%= npc_task_chat_game_path(@game) %>" method="POST">
      <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
      <textarea id="user-response" class="response-textarea" placeholder="Type your answer here..."></textarea>
      <button type="submit" class="response-submit">Send</button>
    </form>
  </div>
</div>
